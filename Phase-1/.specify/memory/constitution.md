<!--
Sync Impact Report
==================
Version Change: Initial → 1.0.0
Type: MAJOR (initial constitution establishment)

Sections Added:
- Core Principles (13 principles covering SDD, architecture, features, domain rules, code quality, UX, validation, workflow, testing, deliverables, constraints, success criteria, agent roles)
- Development Workflow section
- Testing Requirements section
- Amendment Process

Templates Requiring Updates:
✅ plan-template.md - Constitution Check section aligns with principles
✅ spec-template.md - User scenarios and requirements align with domain rules
✅ tasks-template.md - Task structure aligns with workflow and testing requirements

Follow-up Actions:
- Create initial feature specifications in specs/ folder
- Set up Python project structure with UV
- Configure QA skills for constitution compliance checking
-->

# Todo App Phase I Constitution

## Project Overview

A command-line todo application that stores tasks in memory, built using spec-driven development with Claude Code and Spec-Kit Plus. This project demonstrates disciplined software engineering practices through AI-assisted development for a hackathon submission.

**Project Type**: Single Python CLI Application
**Phase**: Phase I (Basic Features, In-Memory Storage)
**Target**: Hackathon submission with 90-second demo
**Technology**: Python 3.13+, UV package manager, Standard Library only

## Core Principles

### 1. Spec-Driven Development (NON-NEGOTIABLE)

**All code MUST be generated by Claude Code based on specifications.**

- Constitution and specifications written FIRST, before any implementation
- NO manual code writing permitted
- Refine specifications until Claude Code generates correct output
- All specifications stored in `/specs` folder with version history
- Iterate: Write Spec → Generate Code → Test → Refine Spec → Regenerate

**Rationale**: Ensures systematic, documented development with clear requirements and AI-generated implementation consistency.

### 2. Project Architecture

**Technology Stack (FIXED for Phase I):**
- Python 3.13+
- UV (package manager)
- Claude Code (AI coding assistant)
- Spec-Kit Plus (specification management)
- Standard library ONLY (no external packages)

**Project Structure:**
```
todo-app-phase1/
├── .specify/
│   ├── memory/
│   │   └── constitution.md      # This file
│   ├── templates/               # SDD templates
│   └── scripts/                 # Automation scripts
├── .claude/
│   ├── agents/                  # Specialized agents
│   ├── commands/                # Skills/commands
│   └── skills/                  # QA and workflow skills
├── specs/                       # Feature specifications
│   ├── todo-app/
│   │   ├── spec.md
│   │   ├── plan.md
│   │   └── tasks.md
│   └── technical/
│       ├── data-model.md
│       └── cli-interface.md
├── src/                         # Python source code
│   ├── __init__.py
│   ├── main.py
│   ├── task.py
│   ├── task_manager.py
│   └── cli.py
├── tests/                       # Test files
├── history/
│   ├── prompts/                 # Prompt History Records
│   └── adr/                     # Architecture Decision Records
├── CLAUDE.md                    # Claude Code instructions
├── README.md                    # Setup instructions
└── pyproject.toml               # UV project configuration
```

**Rationale**: Clear separation of specifications, implementation, and governance; standard structure for AI-assisted development.

### 3. Feature Requirements (Basic Level ONLY)

**Mandatory features for Phase I (all 5 required):**

1. **Add Task** - Create new todo items with title and description
2. **Delete Task** - Remove tasks from the list by ID
3. **Update Task** - Modify existing task details (title, description)
4. **View Task List** - Display all tasks with status indicators
5. **Mark as Complete** - Toggle task completion status

**Out of Scope (explicitly excluded):**
- Intermediate/Advanced features (priorities, tags, due dates, categories)
- Data persistence (files, databases)
- Multi-user support or authentication
- Web interface or GUI
- External API integrations

**Rationale**: Focused scope ensures completable hackathon project with clear demo value; prevents feature creep.

### 4. Domain Rules (Enforced by todo-domain-expert agent)

**Task Definition:**
- **Required fields**: unique ID (integer), title (string, 1-200 chars), completion status (boolean)
- **Optional fields**: description (string, max 1000 chars)
- **Auto-generated**: created timestamp (ISO 8601), updated timestamp (ISO 8601)

**Allowed Operations:**
- **Add**: Create task with title (required) and description (optional); reject empty title
- **List**: View all tasks with ID, title, status; show "No tasks found" for empty list
- **Update**: Modify title and/or description of existing task by ID; reject invalid ID
- **Complete**: Toggle completion status (true/false); idempotent operation
- **Delete**: Permanently remove task by ID; reject invalid ID

**Edge Cases (mandatory handling):**
- Empty task title → Reject with error message "Title cannot be empty"
- Duplicate task titles → Allow (users may want similar tasks)
- Invalid task ID (non-existent) → Return "Task not found" error
- Update non-existent task → Return "Task ID {id} does not exist"
- Delete non-existent task → Return "Task ID {id} does not exist"
- Empty task list → Display "No tasks found" message
- Whitespace-only title → Reject with error "Title cannot be empty"
- Title exceeding 200 chars → Reject with error "Title too long (max 200 characters)"
- Description exceeding 1000 chars → Reject with error "Description too long (max 1000 characters)"

**Rationale**: Clear domain boundaries ensure consistent behavior; explicit edge case handling prevents crashes and confusion.

### 5. Code Quality Standards (Enforced by python-cli-specialist agent)

**Python Patterns (mandatory):**
- Clean, beginner-friendly code (readable by novice Python developers)
- Type hints throughout (PEP 484 compliance)
- Docstrings for all public functions and classes (PEP 257 compliance)
- Error handling for all user inputs (try/except with specific exceptions)
- No external dependencies beyond standard library for Phase I

**CLI Best Practices:**
- Clear menu system with numbered options (1-6)
- Input validation with helpful error messages
- Confirmation prompts for destructive actions (delete task)
- Clean input/output flows (no clutter)
- Graceful exit handling (clean shutdown on option 6 or Ctrl+C)

**Code Organization:**
- Separation of concerns: Task model, TaskManager (business logic), CLI interface
- Single Responsibility Principle (each class/function does one thing)
- DRY (Don't Repeat Yourself) - extract common patterns
- Proper encapsulation (private methods prefixed with _)

**Rationale**: High code quality ensures maintainability, readability for judges, and professional presentation.

### 6. User Experience Requirements

**Menu Interface (exact format):**
```
=== Todo App ===
1. Add Task
2. View All Tasks
3. Update Task
4. Mark Task Complete
5. Delete Task
6. Exit

Enter your choice (1-6):
```

**Task Display Format (exact format):**
```
ID: 1 | [X] Buy groceries | Created: 2025-01-15 10:30
    Description: Milk, eggs, bread

ID: 2 | [ ] Call dentist | Created: 2025-01-15 11:45
    Description: Schedule annual checkup
```

**User Interactions:**
- Clear prompts for all inputs (e.g., "Enter task title: ")
- Immediate feedback on actions (e.g., "✓ Task added successfully!")
- Error messages explain what went wrong (e.g., "✗ Error: Title cannot be empty")
- Ability to cancel operations (e.g., "Enter 0 to cancel")
- NO crashes - graceful error handling for all inputs

**Rationale**: Professional UX creates positive impression with judges; clear feedback reduces user confusion.

### 7. Validation Criteria (Enforced by hackathon-judge agent)

**Phase Appropriateness Checks:**
- In-memory storage ONLY (no files, no database) ✓
- Console application (no GUI, no web) ✓
- Single-user (no authentication) ✓
- Basic features only (no priorities, tags, advanced features) ✓

**Simplicity Checklist:**
- Can be explained in 2 minutes? ✓
- Can be demoed in 90 seconds? ✓
- No over-engineering (YAGNI principle) ✓
- Clear, readable code that a beginner can understand ✓
- Minimal but complete feature set ✓

**Demo Readiness:**
- All 5 basic features work without errors ✓
- Clean, professional console output ✓
- Runs smoothly on first try ✓
- Easy setup (just Python + UV) ✓

**Rationale**: Hackathon judges value working demos, appropriate scope, and clean execution over complexity.

### 8. Development Workflow (Spec-First Process)

**Mandatory workflow steps:**

1. **Specify**: Write feature specification in `/specs/features/` using `/sp.specify`
2. **Plan**: Create architectural plan using `/sp.plan`
3. **Tasks**: Generate actionable tasks using `/sp.tasks`
4. **Implement**: Execute tasks using `/sp.implement` (Claude Code generates code)
5. **Test**: Validate against acceptance criteria
6. **Refine**: If tests fail, refine spec and regenerate code
7. **Commit**: Use `/sp.git.commit_pr` to version changes

**Iteration Cycle:**
```
Specify → Plan → Tasks → Implement → Test → [Refine Spec if needed] → Commit → Done
```

**Never:**
- Write code manually (violates Spec-Driven Development principle)
- Skip specification documentation
- Implement features not in specifications
- Over-engineer for future phases

**Rationale**: Systematic workflow ensures traceability, documentation, and AI-assisted quality.

### 9. Testing Requirements

**Manual Testing Checklist (mandatory coverage):**
- [ ] Add task with title only
- [ ] Add task with title and description
- [ ] Add task with empty title (should reject)
- [ ] Add task with whitespace-only title (should reject)
- [ ] Add task with title exceeding 200 chars (should reject)
- [ ] View empty task list (should show "No tasks found")
- [ ] View populated task list
- [ ] Update task title
- [ ] Update task description
- [ ] Update non-existent task ID (should error)
- [ ] Mark task complete
- [ ] Mark task incomplete (toggle)
- [ ] Delete existing task
- [ ] Delete non-existent task ID (should error)
- [ ] Handle invalid menu choice (e.g., 7, abc)
- [ ] Exit application cleanly (option 6)
- [ ] Handle Ctrl+C gracefully

**Error Handling Requirements:**
- All user inputs validated before processing
- Helpful error messages (not stack traces)
- No application crashes under any input
- Graceful degradation for edge cases

**Rationale**: Comprehensive testing prevents demo failures; error handling shows professional quality.

### 10. Deliverables Checklist

**Required Files:**
- [x] `constitution.md` - This governance document
- [ ] `specs/` folder with all feature specifications
- [ ] `src/` folder with Python source code
- [ ] `README.md` with setup instructions
- [ ] `CLAUDE.md` with Claude Code usage instructions
- [ ] `pyproject.toml` for UV package management
- [ ] `history/prompts/` with Prompt History Records
- [ ] `history/adr/` with Architecture Decision Records (if applicable)

**Demo Video Requirements:**
- Maximum 90 seconds duration
- Show all 5 basic features in action
- Demonstrate error handling (at least one edge case)
- Show clean code quality (brief code walkthrough)

**GitHub Repository Requirements:**
- Public repository
- Clear commit history (using Prompt History Records)
- All specifications included in `/specs`
- Working code on main branch
- README with setup and run instructions

**Rationale**: Complete deliverables demonstrate professionalism and enable reproducibility.

### 11. Constraints

**Technology Constraints (FIXED):**
- Python 3.13+ ONLY (no other languages)
- UV for package management (not pip or poetry)
- Standard library ONLY (no external packages for Phase I)
- In-memory storage (no persistence mechanisms)

**Process Constraints (NON-NEGOTIABLE):**
- Spec-driven development (all code via Claude Code)
- Claude Code for all implementation (no manual coding)
- Clean code principles mandatory (type hints, docstrings, error handling)
- No feature creep beyond Basic Level

**Scope Constraints (PHASE I LIMITS):**
- Basic Level features ONLY (5 features listed in Principle 3)
- No intermediate or advanced features
- No web interface or GUI
- No multi-user support
- No data persistence (files, databases, cloud)

**Rationale**: Fixed constraints prevent scope creep and ensure timely completion; Phase I is foundation for future phases.

### 12. Success Criteria

**Must Have (Blocking):**
- All 5 Basic Level features working without errors
- Clean, readable code (beginner-friendly)
- Error handling for all user inputs
- Professional console interface
- Complete specifications in `/specs`
- Demo video under 90 seconds
- README with setup instructions

**Quality Indicators (Scoring Impact):**
- Beginner can understand the code architecture
- No crashes or unhandled exceptions
- Meets all domain rules (Principle 4)
- Follows Python best practices (PEP 8, PEP 257, type hints)
- Impresses hackathon judges (clean demo, appropriate scope)

**Rationale**: Clear success criteria enable objective evaluation and guide development priorities.

### 13. Agent Roles

**Specialized agents enforce specific aspects:**

**todo-spec-manager:**
- Enforces Spec-Driven Development workflow
- Validates specifications exist before implementation
- Checks phase appropriateness (Phase I constraints)
- Blocks code writing without approved specs

**todo-domain-expert:**
- Defines business rules for task management
- Validates acceptance criteria completeness
- Ensures edge cases are handled (Principle 4)
- Reviews specification quality

**python-cli-specialist:**
- Ensures clean Python code (type hints, docstrings)
- Validates CLI patterns and UX (Principle 6)
- Checks code quality (PEP 8, PEP 257)
- Enforces best practices (error handling, separation of concerns)

**hackathon-judge:**
- Reviews against hackathon rubric
- Checks phase appropriateness (Basic Level only)
- Validates demo readiness (90-second demo)
- Predicts scoring impact (simplicity, execution, scope)

**QA Agent (via skills):**
- Executes acceptance testing (`qa.acceptance-test`)
- Performs code quality review (`qa.code-quality`)
- Analyzes test coverage (`qa.test-coverage`)

**Rationale**: Specialized agents provide domain expertise and enforce constitution principles systematically.

## Development Workflow

**Standard Development Cycle:**

1. **Constitution First**: This file defines project governance (completed)
2. **Specify Features**: Create feature specs using `/sp.specify` (manual or agent-assisted)
3. **Plan Architecture**: Generate implementation plan using `/sp.plan`
4. **Generate Tasks**: Break down plan into actionable tasks using `/sp.tasks`
5. **Implement**: Execute tasks using `/sp.implement` (Claude Code generates code)
6. **QA Validation**: Run QA skills to verify quality and acceptance criteria
7. **Commit**: Version changes using `/sp.git.commit_pr`
8. **Iterate**: Refine specs if needed and regenerate

**Quality Gates:**

- **Before Planning**: Constitution must exist and be ratified
- **Before Tasks**: Specification and plan must be approved
- **Before Implementation**: Tasks must be defined with acceptance criteria
- **Before Commit**: All acceptance tests must pass
- **Before PR**: Code quality and test coverage must meet thresholds

## Testing Requirements

**Test Categories:**

**Manual Testing (mandatory for Phase I):**
- All 17 checklist items in Principle 9 must pass
- Test results documented in PHR (Prompt History Record)

**Automated Testing (future phases):**
- Unit tests for TaskManager business logic
- Integration tests for CLI workflows
- Contract tests for data models

**Error Testing (mandatory):**
- Test all edge cases defined in Principle 4
- Verify helpful error messages (not stack traces)
- Confirm no crashes under any input

## Amendment Process

**This constitution can ONLY be amended through the following process:**

1. **Proposal**: Document proposed change with rationale
2. **Impact Analysis**: Identify affected specifications, code, and templates
3. **Version Increment**: Determine MAJOR/MINOR/PATCH bump
4. **Update Constitution**: Modify this file with new version and amendment date
5. **Propagate Changes**: Update dependent templates and documentation
6. **Commit**: Version the amendment with clear commit message
7. **Communicate**: Notify all agents and update CLAUDE.md if needed

**Versioning Rules:**
- **MAJOR (X.0.0)**: Backward-incompatible changes (e.g., removing principles, changing core workflow)
- **MINOR (x.Y.0)**: New principles or sections added; expanded guidance
- **PATCH (x.y.Z)**: Clarifications, typo fixes, non-semantic refinements

**Amendment Authority:**
- Project owner approves all amendments
- Constitution supersedes all other project documents
- Conflicts resolved in favor of constitution

## Governance

**Enforcement:**
- All specifications must comply with Core Principles
- All code generation requests verified against constitution
- Specialized agents enforce their designated principles
- QA skills validate compliance before commits
- No exceptions to NON-NEGOTIABLE principles

**Compliance Review:**
- Every feature specification reviewed against Principle 3, 4, 7, 11
- Every implementation reviewed against Principle 5, 6
- Every commit reviewed against Principle 8, 9

**Complexity Justification:**
- Any deviation from simplicity (Principle 7) must be documented
- Over-engineering rejected unless justified by constitution
- YAGNI principle enforced by hackathon-judge agent

**Runtime Guidance:**
- See `CLAUDE.md` for Claude Code operational instructions
- See `.claude/agents/` for specialized agent definitions
- See `.claude/skills/` for QA and workflow skills

**Version**: 1.0.0 | **Ratified**: 2025-12-27 | **Last Amended**: 2025-12-27
